@model inventario_coprotab.ViewModels.EquipoCreateViewModel

<form asp-action="CreateEquipoModal" asp-controller="Dispositivo" method="post" id="formEquipo">
    @Html.AntiForgeryToken()
    <div asp-validation-summary="ModelOnly" class="alert alert-danger"></div>

    <div class="row">
        <div class="col-md-6 mb-3">
            <label asp-for="Nombre" class="form-label fw-bold">Nombre del Equipo</label>
            <input asp-for="Nombre" class="form-control" placeholder="Ej: Laptop Dell Latitude 5490" />
            <span asp-validation-for="Nombre" class="text-danger small"></span>
        </div>
        <div class="col-md-6 mb-3">
            <label asp-for="IdMarca" class="form-label fw-bold">Marca</label>
            <select asp-for="IdMarca" class="form-select" asp-items="Model.Marcas"></select>
            <span asp-validation-for="IdMarca" class="text-danger small"></span>
        </div>

    </div>
    <input type="hidden" asp-for="IdTipo" />

    <div class="mb-3">
        <label asp-for="Descripcion" class="form-label fw-bold">Descripción</label>
        <textarea asp-for="Descripcion" class="form-control" rows="2"></textarea>
    </div>

    <div class="mb-3">
        <label asp-for="NroSerie" class="form-label fw-bold">Número de Serie</label>
        <input asp-for="NroSerie" class="form-control" placeholder="Ej: SN123456789" />
    </div>

    <div class="mb-3">
        <label asp-for="Estado" class="form-label fw-bold">Estado</label>
        <select asp-for="Estado" class="form-select">
            <option value="Nuevo">Nuevo</option>
            <option value="En uso">En uso</option>
            <option value="Obsoleto">Obsoleto</option>
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label fw-bold">Componentes Internos</label>
        <div class="row">
            @for (int i = 0; i < Model.ComponentesDisponibles.Count; i++)
            {
                <div class="col-md-6 mb-2">
                    <div class="form-check">
                        <input type="checkbox"
                               name="ComponentesSeleccionados"
                               value="@Model.ComponentesDisponibles[i].IdComponente"
                               id="comp_@i" />
                        <label class="form-check-label" for="comp_@i">
                            @Model.ComponentesDisponibles[i].NombreCompleto
                        </label>
                    </div>
                </div>
            }
        </div>
        <small class="text-muted">Selecciona los componentes que forman parte de este equipo.</small>
    </div>

    <div class="modal-footer border-0 pt-4">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="submit" class="btn btn-primary-custom">Guardar Equipo</button>
    </div>
</form>

<script>
    // Validación unobtrusive
    $(function () {
        var form = $(baseUrl+'#formEquipo');
        if (form.length) {
            $.validator.unobtrusive.parse(form);
        }
    });
</script>